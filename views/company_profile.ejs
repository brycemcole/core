<!DOCTYPE html>
<html>

<head>
  <meta name="company-name" content="<%= company.name %>">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>CORE - <%= company.name %></title>
  <link rel="stylesheet" href="/css/navbar.css" />
  <link rel="stylesheet" href="/css/jobs.css" />
  <link rel="stylesheet" href="/css/company_profile.css" />
  <link rel="shortcut icon" href="/img/core.png" />

  <!-- Meta Tags for SEO and Social Media -->
  <meta name="description" content="<%= company.description %>">
  <meta name="keywords" content="<%= company.name %>, company profile, CORE company, connect with <%= company.name %>">
  <meta name="robots" content="index, follow">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="<%= company.name %> - CORE">
  <meta property="og:description" content="<%= company.description %>">
  <meta property="og:image" content="<%= company.logo %>">
  <meta property="og:url" content="https://getcore.dev/company/<%= company.name %>">
  <meta property="og:type" content="website">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="<%= company.name %> - CORE">
  <meta name="twitter:description" content="<%= company.description %>">
  <meta name="twitter:image" content="<%= company.logo %>">
</head>
<style>
</style>

<body>
  <%- include('partials/navbar', { pagePath: 'company' }) %>
  <main>
    <%- include('partials/com-btn-container', { }) %>
    <% locals.user = user %>

    <div class="company-info-container" data-company="<%= company.name %>">
      <div class="company-menu">
        <div class="company-header margin-06-bottom">
          <div class="company-image">
            <% if (company.logo) { %>
            <img class="thumbnail thumbnail-tiny thumbnail-regular" src="<%= company.logo %>" alt="" />
            <% } %>
          </div>
          <div class="company-posting-info">
            <span class="main-text bold"><%= company.name %></span>
          </div>
          <% if (user && user.isAdmin) { %>
          <a style="margin-left:auto;" href="/jobs/company/<%= encodeURIComponent(company.name) %>/edit">
            <button class="regular-button-normal">
              <span class="material-symbols-outlined">
                edit
              </span>
              Edit
            </button>
          </a>
          <% } %>
        </div>
        <div class="company-description secondary-text sub-text margin-06-bottom">
          <p class="description-text secondary-text" id="companyDescription"><%= company.description %></p>
          <button id="toggleButton" style="display: none;">Show more</button>
        </div>
        <div class="external-links flex flex-row gap-06 margin-06-bottom">
          <% if (company.twitter_username) { %>
          <span class="company-flair-item flair-bordered">
            <span style="margin-right: .5rem;font-weight:600;" class="symbol">&Xopf;</span>
            <a href="https://twitter.com/<%= company.twitter_username %>" target="_blank" class="company-twitter_username"><%= company.twitter_username.replace('@', '') %></a>
            <span style="padding:0;margin-left:.4rem;" class="material-symbols-outlined">
              north_east
            </span>
          </span>
          <% } %>

          <% if (company.company_website) { %>
          <span class="company-flair-item flair-bordered">
            <span class="material-symbols-outlined">language</span>
            <a href="<%= company.company_website %>" target="_blank" class="company-company_website"><%= company.company_website %></a>
            <span style="padding:0;margin-left:.4rem;" class="material-symbols-outlined">
              north_east
            </span>
          </span>
          <% } %>
        </div>
        <div class="company-flair sub-text margin-03-bottom">
          <% if (company.job_board_url) { %>
          <span class="company-flair-item">
            <div class="radar-pulse">
              <div class="pulse"></div>
            </div>
            Active Job Board
          </span>
          <% } %>

          <span class="company-flair-item">
            <span class="material-symbols-outlined">location_on</span>
            <span class="company-location"><%= company.location %></span>
          </span>

          <% if (company.industry) { %>
          <span class="company-flair-item">
            <span class="material-symbols-outlined">factory</span>
            <span class="company-industry"><%= company.industry %></span>
          </span>
          <% } %>

          <% if (company.stock_symbol) { %>
          <span class="company-flair-item">
            <span class="material-symbols-outlined">show_chart</span>
            <a class="company-stock_symbol" href="https://finance.yahoo.com/chart/<%= company.stock_symbol %>" target="_blank" data-symbol="<%= company.stock_symbol %>">
              $<%= company.stock_symbol %>
              <span class="stock-movement" data-movement="<%= company.stock_symbol %>"></span>
            </a>
          </span>
          <% } %>

          <% if (company.size) { %>
          <span class="company-flair-item">
            <span class="material-symbols-outlined">group</span>
            <span class="company-size"><%= company.size %></span>
          </span>
          <% } %>

          <% if (company.founded) { %>
          <span class="company-flair-item">
            <span class="material-symbols-outlined">event</span>
            <span class="company-founded">Founded: <%= company.founded.getFullYear() %></span>
          </span>
          <% } %>

          <% if (company.company_stage) { %>
          <span class="company-flair-item">
            <span class="material-symbols-outlined">trending_up</span>
            <span class="company-company_stage">Stage: <%= company.company_stage %></span>
          </span>
          <% } %>
        </div>

        <div class="ai-generated-info px-4 py-2">
          <h3 class="ai-info-header">AI-Generated Insights</h3>
          <div class="ai-warning">
            <p><strong>Note:</strong> The following information is generated by AI and may not always be accurate. Please verify independently.</p>
          </div>

          <% if (company.company_recent_news_sentiment) { %>
          <span class="company-flair-item ai-item">
            <span class="material-symbols-outlined">article</span>
            <span class="company-company_recent_news_sentiment">Recent News Sentiment: <%= company.company_recent_news_sentiment %></span>
          </span>
          <% } %>

          <% if (company.company_issues) { %>
          <span class="company-flair-item ai-item">
            <span class="material-symbols-outlined">warning</span>
            <span class="company-company_issues">Potential Issues: <%= company.company_issues %></span>
          </span>
          <% } %>

          <% if (company.company_sentiment) { %>
          <span class="company-flair-item ai-item">
            <span class="material-symbols-outlined">sentiment_satisfied</span>
            <span class="company-company_sentiment">Overall Sentiment: <%= company.company_sentiment %></span>
          </span>
          <% } %>

          <% if (company.company_engineer_choice) { %>
          <span class="company-flair-item ai-item">
            <span class="material-symbols-outlined">engineering</span>
            <span class="company-company_engineer_choice">Engineer's Choice: <%= company.company_engineer_choice %></span>
          </span>
          <% } %>
        </div>
        <!--
        <div class="company-buttons margin-1-bottom">
          <button class="special-button-normal" id="follow-company-button"><span class="material-symbols-outlined">
              person_add
            </span>Follow</button>
          <button class="null-button-normal" id="share-company-button" onclick="share('<%= company.name %>', '', 'https://getcore.dev/jobs/company/<%= encodeURIComponent(company.name) %>')">
            <span class="material-symbols-outlined">share</span> Share
          </button>
        </div>
        -->
        <ul class="second-nav-links">
          <li class="dropdown active">
            <a class="navbar-button company-navbar-button active no-bg no-border" data-id="jobs" id="company-updates-selector">
              <span class="material-symbols-outlined">
                work
              </span>Jobs
              <div class="jobs-count">
                <%= jobsCount %>
              </div>
            </a>


          </li>
          <li class="dropdown">
            <a class="navbar-button company-navbar-button no-bg no-border" data-id="company-comments" id="company-updates-selector"><span class="material-symbols-outlined">
                chat_bubble
              </span>Comments
              <div class="comments-count">
              </div>
            </a>
          </li>
          <li class="dropdown">
            <a class="navbar-button company-navbar-button no-bg no-border" id="company-updates-selector">
              <span class="material-symbols-outlined">
                info
              </span>Info</a>
          </li>
        </ul>
      </div>
      <div class="company-containers">
        <div class="company-comments company-profile-section">
          <h3 class="company-comments-header-title margin-1-bottom"> Comments</h3>
          <% if (user) { %>
          <form class="comment-form margin-1-bottom" action="/jobs/company/<%= encodeURIComponent(company.name) %>/comments" method="POST">
            <textarea class="comment-input adaptive-input" name="content" placeholder="Write a comment..."></textarea>
            <button type="submit" class="comment-submit submit-button">Post</button>
          </form>
          <% } %>
          <div class="comments-container">
          </div>
          <%- include('partials/footer') %>

        </div>
        <div class="jobs company-profile-section">
          <div class="jobs-company-header margin-06-bottom">
            <h3 class="jobs-company-header-text"> <%= company.name%> is hiring for <%= jobsCount %> jobs</h3>
            <button class="null-button-normal null-button-bordered" id="job-filter-button"> <span class="material-symbols-outlined">
                sort
              </span>Filter</button>
          </div>
          <div class="filter-container">
            <input type="text" class="filter-input" placeholder="Search for a job" />
          </div>
          <div class="job-list">
            <div id="loading-indicator">
              <div class="spinner-container">
                <div class="spinner"></div>
              </div>
            </div>
          </div>
          <%- include('partials/footer') %>

        </div>
      </div>

    </div>

    <%- include('partials/right-side-container') %>

  </main>

  <script src="/js/companyProfile.js"></script>

</body>

</html>